(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){},167:function(e,t,a){e.exports=a.p+"static/media/mustache.685ab3cc.svg"},180:function(e,t,a){e.exports=a(340)},206:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(39),c=a.n(l),o=(a(120),a(14)),s=a(12),i=a(17),u=a(15),m=a(22),d=a(16),p=a(23),h=a.n(p),g=a(374),f=a(378),b=a(377),v=a(40),E=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",confirmPassword:""},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),h.a.post("/user/",{username:this.state.username,password:this.state.password}).then(function(e){console.log(e),e.data.errmsg?console.log("username already taken"):(console.log("successful signup"),t.setState({redirectTo:"/login"}))}).catch(function(e){console.log("signup error: "),console.log(e)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"SignupForm"},r.a.createElement("h4",null,"Sign up"),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group "},r.a.createElement("div",{className:"col-7"}),r.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Sign up"))))}}]),t}(n.Component),y=a(375),N=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",redirectTo:null},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("handleSubmit"),h.a.post("/user/login",{username:this.state.username,password:this.state.password}).then(function(e){console.log("login response: "),console.log(e),200===e.status&&(t.props.updateUser({loggedIn:!0,username:e.data.username}),t.setState({redirectTo:"/"}))}).catch(function(e){console.log("login error: "),console.log(e)})}},{key:"render",value:function(){return console.log("this.state.redirectTo: ",this.state.redirectTo),this.state.redirectTo?r.a.createElement(y.a,{to:{pathname:this.state.redirectTo}}):(console.log("aasdfasdfasdfasdfasdfsadf"),r.a.createElement("div",null,r.a.createElement("h4",null,"Login"),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-1 col-ml-auto"},r.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password:"," ")),r.a.createElement("div",{className:"col-3 col-mr-auto"},r.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group "},r.a.createElement("div",{className:"col-7"}),r.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login")))))}}]),t}(n.Component),O=a(364),j=a(167),x=a.n(j),k=(a(206),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).logout=e.logout.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"logout",value:function(e){var t=this;e.preventDefault(),console.log("logging out"),h.a.post("/user/logout").then(function(e){console.log(e.data),200===e.status&&t.props.updateUser({loggedIn:!1,username:null,userid:null})}).catch(function(e){console.log("Logout error")})}},{key:"render",value:function(){var e=this.props.loggedIn;return console.log("navbar render, props: "),console.log(this.props),r.a.createElement("div",null,r.a.createElement("header",{className:"navbar App-header",id:"nav-container"},r.a.createElement("div",{className:"col-4"},e?r.a.createElement("section",{className:"navbar-section"},r.a.createElement(O.a,{to:"/",className:"btn btn-link text-secondary"},r.a.createElement("span",{className:"text-secondary"},"New Search")),r.a.createElement(O.a,{to:"/api/recipes",className:"btn btn-link text-secondary"},r.a.createElement("span",{className:"text-secondary"},"Saved Recipes")),r.a.createElement(O.a,{to:"#",className:"btn btn-link text-secondary",onClick:this.logout},r.a.createElement("span",{className:"text-secondary"},"Logout"))):r.a.createElement("section",{className:"navbar-section"},r.a.createElement(O.a,{to:"/",className:"btn btn-link text-secondary"},r.a.createElement("span",{className:"text-secondary"},"Home")),r.a.createElement(O.a,{to:"/login",className:"btn btn-link text-secondary"},r.a.createElement("span",{className:"text-secondary"},"Login")),r.a.createElement(O.a,{to:"/signup",className:"btn btn-link"},r.a.createElement("span",{className:"text-secondary"},"Sign Up")))),r.a.createElement("div",{className:"col-4 col-mr-auto"},r.a.createElement("div",{id:"top-filler"}),r.a.createElement("img",{src:x.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Pantry Chef"))))}}]),t}(n.Component)),S={callEdamam:function(e){return h.a.get("/api/edamam",{params:{q:e}})},getRecipes:function(e){return console.log("getting axios recipes",e),h.a.get("/api/recipes/"+e)},deleteRecipe:function(e){return h.a.delete("/api/recipes/"+e)},saveRecipe:function(e,t){return console.log("userid: ",t),h.a.post("/api/recipes/",e)}},C=a(41),w=a(42);function F(){var e=Object(C.a)(["\n    width: 100%;\n    height: 350px\n\n"]);return F=function(){return e},e}var R=w.a.img(F()),I=function(){return r.a.createElement("div",null,r.a.createElement(R,{src:"../../images/cook.jpg"}))},U=function(e){return r.a.createElement("div",{className:"container".concat(e.fluid?"-fluid":"")},e.children)};var T=function(e){return r.a.createElement("div",{className:"row".concat(e.fluid?"-fluid":"")},e.children)};function A(){var e=Object(C.a)(["\n    background-color: white;\n    height: 200px;\n\n"]);return A=function(){return e},e}var D=w.a.div(A()),L=function(e){return r.a.createElement(D,null,e.children)},B=function(e){return r.a.createElement("div",{className:"col-lg-12"},e.children)};function M(){var e=Object(C.a)(["\n  margin-top: 50px;\n"]);return M=function(){return e},e}var P=w.a.div(M()),_=function(e){return r.a.createElement(P,{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col l12 center-align"},r.a.createElement("textarea",Object(v.a)({id:"textarea1",className:"materialize-textarea center-align",onChange:e.handleInputChange,value:e.value,name:"search",type:"text",placeholder:"Apples, cheese, lettuce, chicken"},"id","search")),r.a.createElement("a",{className:"indigo darken-4 waves-effect waves-light btn",onClick:e.handleFormSubmit},"search"))))};function G(){var e=Object(C.a)(["\n  margin-top: 50px;\n"]);return G=function(){return e},e}var z=w.a.div(G()),J=function(e){return r.a.createElement(z,{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col l12 center-align"},r.a.createElement("textarea",Object(v.a)({id:"textarea1",className:"materialize-textarea center-align",onChange:e.handleInputChangeFood,value:e.value,name:"search",type:"text",placeholder:"FOOD,Apples, cheese, lettuce, chicken"},"id","search")),r.a.createElement("a",{className:"indigo darken-4 waves-effect waves-light btn",onClick:e.handleFormSubmitFood},"search"))))},V=a(365),$=a(366),q=a(367),H=a(369),W=a(370),Y=a(371),K=a(368),Q=a(373),X=a(83),Z=a(82),ee=a(172),te=a.n(ee),ae=a(173),ne=a.n(ae),re=Object(V.a)(function(e){return{card:{maxWidth:345,marginTop:10,marginBottom:10},media:{height:0,paddingTop:"56.25%"},avatar:{backgroundColor:Z.a[500]}}});function le(e){var t=re();return r.a.createElement($.a,{className:t.card},r.a.createElement(q.a,{avatar:r.a.createElement(K.a,{"aria-label":"Recipe",className:t.avatar},e.source.charAt(0)),title:e.label,subheader:e.source}),r.a.createElement(H.a,{className:t.media,image:e.imgurl,title:e.name}),r.a.createElement(W.a,null,r.a.createElement(X.a,{variant:"body2",color:"textSecondary",component:"p"},"Recipe Yields: ",e.yield),r.a.createElement(X.a,{variant:"body2",color:"textSecondary",component:"p"},"Calories: ",Number(e.calories).toFixed(0))),r.a.createElement(Y.a,{disableSpacing:!0},r.a.createElement(Q.a,{"data-id":e.uri,onClick:e.handleRecipeSave||e.handleRecipeDelete,"aria-label":"Add to favorites"},r.a.createElement(te.a,null)),r.a.createElement(Q.a,{"aria-label":"Share"},r.a.createElement("a",{href:e.shareurl,target:"_blank"},r.a.createElement(ne.a,null)))))}var ce=a(81),oe=a(372),se=Object(V.a)(function(e){return{root:{flexGrow:1,border:"3px solid green"},paper:{height:300,width:300},control:{padding:e.spacing(2)}}}),ie=function(e){var t=r.a.useState(2),a=(Object(ce.a)(t,1)[0],se());return console.log("props.children",e.children),r.a.createElement(oe.a,{container:!0,className:a.root,spacing:2},e.children.map(function(e,t){return r.a.createElement(oe.a,{xs:4,key:e.key,item:!0},console.log("value: ",e),e)}))},ue=a(112),me=(a(271),function(e){return r.a.createElement(ue.Modal,{id:"foo",bottomSheet:!0},r.a.createElement("h1",{className:"center-align"},e.modalMessage))}),de=a(66),pe={position:"relative",opacity:"10px",background:"#69696e",borderRadius:"none"},he={background:"#85868d",padding:".25rem",margin:"0",float:"right",height:"1rem",borderRadius:"0px",borderColor:"#69696e"},ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getStyleSelected=function(){return{background:"#F4F4F4",padding:"10px",margin:"3px",borderBottom:"1px #ccc dotted",color:a.props.todo.completed?"green":"none"}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.todo,t=e.id,a=e.title,n=e.completed;return r.a.createElement("div",{style:this.getStyleSelected()},r.a.createElement("p",null,r.a.createElement("input",{type:"checkbox",style:pe,onChange:this.props.markComplete.bind(this,t),checked:n?"checked":""})," ",a,r.a.createElement("button",{onClick:this.props.delTodo.bind(this,t),style:he},r.a.createElement("i",{class:"fa fa-trash","aria-hidden":"true"}))))}}]),t}(n.Component),fe=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.todos.map(function(t){return r.a.createElement(ge,{key:t.id,todo:t,markComplete:e.props.markComplete,delTodo:e.props.delTodo})})}}]),t}(n.Component),be=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.onSubmit=function(e){e.preventDefault(),a.props.addTodo(a.state.title),a.setState({title:""})},a.onChange=function(e){return a.setState({title:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit,style:{display:"flex",marginBottom:".5rem"}},r.a.createElement("input",{type:"text",name:"title",style:{flex:"6",padding:"0px",margin:"0px 5px 0px 5px"},placeholder:"Add Ingredient...",value:this.state.title,onChange:this.onChange}),r.a.createElement("input",{type:"submit",value:"Submit",className:"SubmitBtn",style:{flex:"1"}}))}}]),t}(n.Component),ve=function(e){var t=e.checked,a=e.label,n=e.handleClick;return r.a.createElement("div",{className:t?"Checkbox-container checked":"Checkbox-container",onClick:n,role:"button",tabIndex:0,"data-label":a},r.a.createElement("p",{className:"label","data-label":a}))};ve.defaultProps={checked:!0};var Ee=ve,ye={width:"50%",padding:"0px"};n.Component,a(342),Object(V.a)(function(e){return{root:{flexGrow:1},paper:{height:140,width:100},control:{padding:e.spacing(2)}}});var Ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",edamamresult:[],searchfood:"",loading:!1},a.searchRecipes=function(e){a.setState({loading:!0,edamamresult:[]}),S.callEdamam(e).then(function(e){console.log("recipes: ",e),e.data.length>0?(a.setState({loading:!1}),console.log("recipes data: ",e.data),S.getRecipes({}).then(function(t){var n=[];t.data.forEach(function(e){n.push(e.recipeId)});var r=e.data.filter(function(e){return!n.includes(e.recipe.uri)});console.log("filtderedFoods: ",r),a.setState({edamamresult:r})})):a.setState({edamamresult:[]})}).catch(function(e){console.log("ERROR:",e.response.data.message),a.setState({error:e.response.data.message,loading:!1})})},a.handleInputChangeFood=function(e){var t=e.target.value;a.setState({searchfood:t})},a.handleFormSubmitFood=function(e){e.preventDefault(),a.searchRecipes(a.state.searchfood),console.log("this.state.searchfood",a.state.searchfood),a.setState({searchfood:""})},a.saveRecipe=function(e){var t=e.currentTarget.getAttribute("data-id");a.state.edamamresult.filter(function(e){return e.recipe.uri===t}).map(function(e){console.log("recipe: ",e),console.log("this.props.userid: ",a.props.userid),console.log("this.props: ",a.props);var t=e.recipe.uri;t=t.split("recipe_");var n={userId:a.props.userid,uri:t[1],label:e.recipe.label,source:e.recipe.source,url:e.recipe.url,yield:e.recipe.yield,dietLabels:e.recipe.dietLabels,healthLabels:e.recipe.healthLabels,ingredientLines:e.recipe.ingredientLines,calories:e.recipe.calories,image:e.recipe.image};S.saveRecipe(n).then(function(){a.setState(function(e){var t=e.edamamresult.find(function(e){return e.id===n.recipeId}),a=e.edamamresult.indexOf(t);return e.edamamresult.splice(a,1),console.log("state.result: ",e.edamamresult),{edamamresult:e.edamamresult}})})}),window.$("#foo").modal("open")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement("div",null,this.state.error):this.state.loading?r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(L,null,r.a.createElement(_,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col l12 center align"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))))):r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(L,null,r.a.createElement(J,{value:this.state.searchfood,handleInputChangeFood:this.handleInputChangeFood,handleFormSubmitFood:this.handleFormSubmitFood})),r.a.createElement(U,null,r.a.createElement(T,null,r.a.createElement(B,null,r.a.createElement(ie,{count:this.state.edamamresult.length,title:"Results",message:0===this.state.edamamresult?"Enter your ingredients to search for recipes":null},this.state.edamamresult.map(function(t){return r.a.createElement(le,{key:t.recipe.uri,imgurl:t.recipe.image?t.recipe.image:"https://via.placeholder.com/128x193.png/000000/FFFFFF?text=No+Picture!",label:t.recipe.label,uri:t.recipe.uri,shareurl:t.recipe.url,source:t.recipe.source,yield:t.recipe.yield,calories:t.recipe.calories,handleRecipeSave:e.saveRecipe,leftButton:"View",rightButton:"Save"})})),r.a.createElement(me,{modalMessage:"Recipe added to saved page!"})))))}}]),t}(n.Component),Oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={result:[]},a.deleteRecipe=function(e){var t=e.currentTarget.getAttribute("data-id");console.log("this card",t),S.deleteRecipe(t).then(function(){console.log("recipe deleted"),a.setState(function(e){var a=e.result.find(function(e){return console.log("recipeid",e.id),console.log("recipe_id",e._id),console.log("card id",t),e.id===t}),n=e.result.indexOf(a);return e.result.splice(n,1),{result:e.result}})}),window.$("#foo").modal("open")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={userId:this.props.userid};S.getRecipes(t.userId).then(function(t){return e.setState({result:t.data})}).catch(function(e){return console.log(e)})}},{key:"componentDidUpdate",value:function(){console.log(this.state.result)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(U,null,r.a.createElement(T,null,r.a.createElement(B,null,r.a.createElement(ie,{count:this.state.result.length,title:"Saved Recipes",message:0===this.state.result?"No saved recipes!":null},this.state.result.map(function(t){return r.a.createElement(le,{key:t._id,imgurl:t.image?t.image:"https://via.placeholder.com/128x193.png/000000/FFFFFF?text=No+Picture!",label:t.label,uri:t.uri,shareurl:t.url,source:t.source,yield:t.yield,calories:t.calories,handleRecipeDelete:e.deleteRecipe,leftButton:"View",rightButton:"Delete"})})),r.a.createElement(me,{modalMessage:"Recipe deleted!"})))))}}]),t}(n.Component);var je=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={loggedIn:!1,username:null,userid:null},e.getUser=e.getUser.bind(Object(m.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(m.a)(e)),e.updateUser=e.updateUser.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"updateUser",value:function(e){this.setState(e)}},{key:"getUser",value:function(){var e=this;h.a.get("/user/").then(function(t){console.log("Get user response: "),console.log(t.data),t.data.user?(console.log("Get User: There is a user saved in the server session: "),console.log(t.data.user._id),e.setState({loggedIn:!0,username:t.data.user.username,userid:t.data.user._id})):(console.log("Get user: no user"),e.setState({loggedIn:!1,username:null,userid:null}))})}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(k,{updateUser:this.updateUser,loggedIn:this.state.loggedIn}),this.state.loggedIn&&r.a.createElement("p",null,"Join the party, ",this.state.username,"! at ",this.state.userid),r.a.createElement(f.a,null,r.a.createElement(b.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Ne,{userid:e.state.userid})}}),r.a.createElement(b.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(N,{updateUser:e.updateUser})}}),r.a.createElement(b.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(b.a,{exact:!0,path:"/api/recipes",render:function(){return r.a.createElement(Oe,{userid:e.state.userid})}}))))}}]),t}(n.Component);a(338),a(339);c.a.render(r.a.createElement(g.a,null,r.a.createElement(je,null)),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.a1f51fb8.chunk.js.map